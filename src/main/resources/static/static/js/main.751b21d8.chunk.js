(this["webpackJsonpredux-spring"]=this["webpackJsonpredux-spring"]||[]).push([[0],{350:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(8),r=n.n(a),s=n(15),o=n(4),i=n(39),l=n(32),d=n(23),j=n.n(d),b="LOGIN",u="UPDATESTATE",h="http://localhost/api/",O="role-permission",m={headers:{Authorization:localStorage.getItem(O)}},g=n(6);var x=n(3),p=Object(l.b)((function(e){return console.log(e),{zagruzka:e.login.isLoading}}),{loginUser:function(e,t){return function(n){n({type:b}),j.a.post(h+"auth/login",e).then((function(e){console.log(e),localStorage.setItem(O,"Bearer "+e.data),n({type:b}),t("/admin/category")})).catch((function(e){console.log(e),g.b.error("Xatolik!"),n({type:b})}))}}})((function(e){var t=Object(o.h)();console.log(localStorage.getItem(O));return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Login Page"}),Object(x.jsx)("div",{className:"container mt-5",children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-4",children:Object(x.jsx)("div",{className:"card",children:Object(x.jsx)("div",{className:"card-body",children:Object(x.jsxs)(i.AvForm,{onValidSubmit:function(n,c){e.loginUser(c,t)},children:[Object(x.jsx)(i.AvField,{name:"userName",placeholder:"Phone number",type:"text",required:!0}),Object(x.jsx)(i.AvField,{name:"password",placeholder:"Password",type:"password",required:!0}),Object(x.jsxs)("button",{type:"submit",disabled:e.zagruzka,className:"btn btn-success btn-block",children:[" ",e.zagruzka?Object(x.jsx)("span",{className:"spinner-border spinner-border-sm"}):""," Login"]})]})})})})})})]})})),y=function(e){return{type:u,payload:e}};function v(){return function(e){j.a.get(h+"category",m).then((function(t){console.log(t),e(y({categories:t.data}))})).catch((function(e){console.log(e),g.b.error("Xatolik!")}))}}function f(){return function(e){j.a.get(h+"auth/me",m).then((function(t){e({type:u,payload:{currentUser:t.data}}),console.log(t)}))}}var N=Object(l.b)((function(e){return{currentUser:e.app.currentUser}}),{getMe:f})((function(e){var t;return Object(x.jsxs)("div",{className:"admin-layout",children:[Object(x.jsx)("div",{className:"admin-navbar"}),Object(x.jsx)("div",{className:"admin-content",children:Object(x.jsxs)("div",{className:"admin-content-left bg-info",children:[Object(x.jsxs)("div",{className:"d-flex align-items-center",children:[Object(x.jsx)("div",{className:"user-image",children:Object(x.jsx)("span",{className:"icon icon-user"})}),Object(x.jsxs)("div",{children:[Object(x.jsx)("h5",{className:"mb-0",children:e.currentUser.fullName}),Object(x.jsx)("p",{className:"mb-0",children:null===(t=e.currentUser.role)||void 0===t?void 0:t.name})]})]}),Object(x.jsxs)("ul",{className:"nav flex-column mt-4",children:[Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(s.b,{className:"nav-link text-white",to:"/admin/dashboard",children:"Dashboard"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(s.b,{className:"nav-link text-white",to:"/admin/order",children:"Buyurtmalar"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(s.b,{className:"nav-link text-white",to:"/admin/category",children:"Kategoriyalar"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(s.b,{className:"nav-link text-white",to:"/admin/product",children:"Mahsulotlar"})})]})]})})]})})),C=function(){return Object(x.jsx)("div",{children:Object(x.jsx)("h1",{children:"Dashboard"})})},k=n(5),M=Object(l.b)((function(e){return{modalOpen:e.category.modalOpen,categories:e.category.categories,currentUser:e.app.currentUser,deleteModalOpen:e.category.deleteModalOpen,currentCategory:e.category.currentCategory}}),{updateState:y,addCategory:function(e){return function(t){console.log(e);localStorage.getItem(O);j.a.post(h+"category",e,m).then((function(e){e.data?(g.b.success("GET"),t(v()),t({type:u,payload:{modalOpen:!1}})):g.b.error(e.data.message)}))}},getCategories:v,deleteCategory:function(e){return function(t){j.a.delete(h+"category/"+e,m).then((function(e){e.data?(g.b.success("DELETED!"),t(v()),t({type:u,payload:{deleteModalOpen:!1}})):g.b.error(e.data.message)}))}},editCategory:function(e,t){return function(n){j.a.put(h+"category/"+e,t,m).then((function(e){e.data?(g.b.success("EDITED!"),n(v()),n({type:u,payload:{modalOpen:!1}})):g.b.error(e.data.message)}))}},search:function(e){return function(t){j.a.get(h+"category/search?name="+e,m).then((function(e){e.data?(g.b.success("Mana!"),console.log(e),t(y({categories:e.data}))):g.b.error(e.data.message)}))}},getMe:f})((function(e){var t;Object(c.useEffect)((function(){e.getCategories(),e.getMe()}),[]);var n=function(){e.updateState({deleteModalOpen:!1})};return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("h5",{children:"Category Page "}),Object(x.jsx)("div",{className:"col-3 offset-3",children:Object(x.jsx)("input",{type:"text",onChange:function(t){return function(t){console.log(t.target.value),e.search(t.target.value)}(t)}})}),Object(x.jsx)("div",{className:"col-3 offset-10",children:Object(x.jsx)("button",{type:"button",className:"btn btn-success",onClick:function(){e.updateState({modalOpen:!0})},children:"Add"})})]}),Object(x.jsx)("div",{className:"row",children:Object(x.jsxs)("table",{className:"table table-striped table-hover mt-3 table-bordered",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Title (uz)"}),Object(x.jsx)("th",{children:"Action"})]})}),Object(x.jsx)("tbody",{children:null===(t=e.categories)||void 0===t?void 0:t.map((function(t,n){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t.name}),Object(x.jsxs)("td",{children:[Object(x.jsx)("button",{className:"btn btn-warning",onClick:function(){return e.updateState({currentCategory:t,modalOpen:!0})},children:"EDIT"}),Object(x.jsx)("button",{className:"btn btn-danger",onClick:function(){return e.updateState({currentCategory:t,deleteModalOpen:!0})},children:"DELETE"})]})]},n)}))})]})})]}),Object(x.jsx)(k.Modal,{isOpen:e.modalOpen,children:Object(x.jsxs)(i.AvForm,{onValidSubmit:function(t,n){console.log(e.currentCategory),e.currentCategory?e.editCategory(e.currentCategory.id,n):e.addCategory(n)},children:[Object(x.jsx)(k.ModalBody,{children:Object(x.jsx)(i.AvField,{name:"name",type:"text",value:e.currentCategory?e.currentCategory.name:"",placeholder:"Uzbekcha nomini kirit"})}),Object(x.jsxs)(k.ModalFooter,{children:[Object(x.jsx)("button",{className:"btn btn-success",type:"submit",children:"Save"}),Object(x.jsx)("button",{className:"btn btn-danger",type:"button",onClick:function(){return e.updateState({modalOpen:!1,selectedCategory:{}})},children:"Cancel"})]})]})}),Object(x.jsxs)(k.Modal,{isOpen:e.deleteModalOpen,toggle:n,children:[Object(x.jsx)(k.ModalBody,{children:Object(x.jsx)("h5",{children:"Rostdan ham o'chirmoqchimisiz?"})}),Object(x.jsxs)(k.ModalFooter,{children:[Object(x.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){e.deleteCategory(e.currentCategory.id)},children:"Ha"}),Object(x.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:n,children:"Yo'q"})]})]})]})})),w=function(e){var t=Object(o.g)();return Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsxs)("div",{className:"col-2",children:[Object(x.jsx)("h1",{children:"Admin"}),Object(x.jsx)(N,{})]}),Object(x.jsxs)("div",{className:"col-10",children:[console.log(t),"/admin/dashboard"===t.pathname?Object(x.jsx)(C,{}):"","/admin/category"===t.pathname?Object(x.jsx)(M,{}):""]})]})})})},S=function(){return localStorage.getItem(O)?Object(x.jsx)(o.b,{}):Object(x.jsx)(o.a,{to:"/login"})},E=function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)(s.a,{children:Object(x.jsxs)(o.e,{children:[Object(x.jsxs)(o.c,{exact:!0,path:"/",element:Object(x.jsx)(S,{}),children:[Object(x.jsx)(o.c,{exact:!0,path:"/",element:Object(x.jsx)(w,{})}),Object(x.jsx)(o.c,{exact:!0,path:"/admin/:id",element:Object(x.jsx)(w,{})})]}),Object(x.jsx)(o.c,{path:"/login",element:Object(x.jsx)(p,{})})]})}),Object(x.jsx)(g.a,{})]})},U=n(43),A=n(27),z={isLoading:!1,modalOpen:!0,menu:{id:1,name:"Jafar"}},D={modalOpen:!1,deleteModalOpen:!1,currentCategory:{},categories:[]},I={currentUser:{}},L=Object(U.b)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(A.a)(Object(A.a)({},e),{},{isLoading:!e.isLoading});default:return e}},category:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(A.a)(Object(A.a)({},e),t.payload);default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(A.a)(Object(A.a)({},e),t.payload);default:return e}}}),T=n(151),F=(n(348),n(349),Object(U.d)(L,Object(U.c)(Object(U.a)(T.a))));r.a.render(Object(x.jsx)(l.a,{store:F,children:Object(x.jsx)(E,{})}),document.getElementById("root"))}},[[350,1,2]]]);
//# sourceMappingURL=main.751b21d8.chunk.js.map